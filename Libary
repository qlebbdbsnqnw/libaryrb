-- üî• Custom TAS UI Library v2.0 (Rayfield-style + loading + toggle K)
-- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–∞—Å—Ç–æ–º–Ω—ã–π, –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
-- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏, tabs, sliders, buttons, toggles, notifications
-- –ì–æ—Ç–æ–≤ –∫ GitHub: raw link ‚Üí loadstring

local CustomLib = {}

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

function CustomLib:CreateWindow(config)
    config = config or {}
    local window = {}
    window.Title = config.Title or "Custom Hub"
    window.SubTitle = config.SubTitle or "by Senior+ Dev"
    window.Size = config.Size or UDim2.fromOffset(600, 500)
    window.ToggleKey = config.ToggleKey or Enum.KeyCode.K
    window.Tabs = {}
    window.CurrentTab = nil
    window.Visible = true

    -- ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "CustomTASLib"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = player:WaitForChild("PlayerGui")

    -- Rayfield-style Loading
    local loadingFrame = Instance.new("Frame")
    loadingFrame.Size = UDim2.new(0, 400, 0, 200)
    loadingFrame.Position = UDim2.new(0.5, -200, 0.5, -100)
    loadingFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 35)
    loadingFrame.BorderSizePixel = 0
    loadingFrame.Parent = screenGui

    local loadingCorner = Instance.new("UICorner")
    loadingCorner.CornerRadius = UDim.new(0, 16)
    loadingCorner.Parent = loadingFrame

    local loadingStroke = Instance.new("UIStroke")
    loadingStroke.Color = Color3.fromRGB(80, 120, 255)
    loadingStroke.Thickness = 2
    loadingStroke.Parent = loadingFrame

    local loadingTitle = Instance.new("TextLabel")
    loadingTitle.Size = UDim2.new(1, -40, 0, 80)
    loadingTitle.Position = UDim2.new(0, 20, 0, 30)
    loadingTitle.BackgroundTransparency = 1
    loadingTitle.Text = window.Title
    loadingTitle.TextColor3 = Color3.fromRGB(100, 200, 255)
    loadingTitle.Font = Enum.Font.GothamBold
    loadingTitle.TextSize = 40
    loadingTitle.Parent = loadingFrame

    local loadingSub = Instance.new("TextLabel")
    loadingSub.Size = UDim2.new(1, -40, 0, 50)
    loadingSub.Position = UDim2.new(0, 20, 0, 100)
    loadingSub.BackgroundTransparency = 1
    loadingSub.Text = window.SubTitle
    loadingSub.TextColor3 = Color3.fromRGB(180, 180, 220)
    loadingSub.Font = Enum.Font.Gotham
    loadingSub.TextSize = 24
    loadingSub.Parent = loadingFrame

    -- Fade + scale animation
    loadingFrame.Size = UDim2.new(0, 0, 0, 0)
    loadingFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    loadingFrame.BackgroundTransparency = 1
    loadingTitle.TextTransparency = 1
    loadingSub.TextTransparency = 1

    TweenService:Create(loadingFrame, TweenInfo.new(0.6, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Size = UDim2.new(0, 400, 0, 200),
        Position = UDim2.new(0.5, -200, 0.5, -100),
        BackgroundTransparency = 0
    }):Play()
    TweenService:Create(loadingTitle, TweenInfo.new(0.8), {TextTransparency = 0}):Play()
    TweenService:Create(loadingSub, TweenInfo.new(1.0), {TextTransparency = 0}):Play()

    task.delay(2.5, function()
        TweenService:Create(loadingFrame, TweenInfo.new(0.6), {BackgroundTransparency = 1}):Play()
        TweenService:Create(loadingTitle, TweenInfo.new(0.6), {TextTransparency = 1}):Play()
        TweenService:Create(loadingSub, TweenInfo.new(0.6), {TextTransparency = 1}):Play()
        task.delay(0.6, function() loadingFrame:Destroy() end)
    end)

    -- Main Frame
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = window.Size
    mainFrame.Position = UDim2.new(0.5, -window.Size.X.Offset/2, 0.5, -window.Size.Y.Offset/2)
    mainFrame.BackgroundColor3 = Color3.fromRGB(22, 22, 35)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = screenGui

    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 16)
    mainCorner.Parent = mainFrame

    local mainStroke = Instance.new("UIStroke")
    mainStroke.Color = Color3.fromRGB(80, 120, 255)
    mainStroke.Thickness = 2
    mainStroke.Transparency = 0.4
    mainStroke.Parent = mainFrame

    local mainGradient = Instance.new("UIGradient")
    mainGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 70)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(18, 18, 35))
    }
    mainGradient.Parent = mainFrame

    -- Header
    local header = Instance.new("Frame")
    header.Size = UDim2.new(1, 0, 0, 70)
    header.BackgroundColor3 = Color3.fromRGB(30, 30, 50)
    header.Parent = mainFrame

    local headerCorner = Instance.new("UICorner")
    headerCorner.CornerRadius = UDim.new(0, 16)
    headerCorner.Parent = header

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, -100, 0, 40)
    titleLabel.Position = UDim2.new(0, 20, 0, 10)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = window.Title
    titleLabel.TextColor3 = Color3.fromRGB(100, 200, 255)
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 28
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = header

    local subLabel = Instance.new("TextLabel")
    subLabel.Size = UDim2.new(1, -100, 0, 30)
    subLabel.Position = UDim2.new(0, 20, 0, 40)
    subLabel.BackgroundTransparency = 1
    subLabel.Text = window.SubTitle
    subLabel.TextColor3 = Color3.fromRGB(180, 180, 220)
    subLabel.Font = Enum.Font.Gotham
    subLabel.TextSize = 18
    subLabel.TextXAlignment = Enum.TextXAlignment.Left
    subLabel.Parent = header

    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0, 50, 0, 50)
    closeBtn.Position = UDim2.new(1, -60, 0, 10)
    closeBtn.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
    closeBtn.Text = "‚úï"
    closeBtn.TextColor3 = Color3.new(1,1,1)
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 30
    closeBtn.Parent = header

    local closeC = Instance.new("UICorner")
    closeC.CornerRadius = UDim.new(0, 12)
    closeC.Parent = closeBtn

    closeBtn.MouseButton1Click:Connect(function()
        TweenService:Create(mainFrame, TweenInfo.new(0.5), {Position = UDim2.new(0.5, -window.Size.X.Offset/2, 1.5, 0)}):Play()
        task.delay(0.5, function() screenGui:Destroy() end)
    end)

    -- Tab Container
    local tabContainer = Instance.new("Frame")
    tabContainer.Size = UDim2.new(0, 160, 1, -70)
    tabContainer.Position = UDim2.new(0, 0, 0, 70)
    tabContainer.BackgroundColor3 = Color3.fromRGB(25, 25, 45)
    tabContainer.Parent = mainFrame

    local tabList = Instance.new("UIListLayout")
    tabList.Padding = UDim.new(0, 10)
    tabList.SortOrder = Enum.SortOrder.LayoutOrder
    tabList.Parent = tabContainer

    -- Content
    local content = Instance.new("ScrollingFrame")
    content.Size = UDim2.new(1, -160, 1, -70)
    content.Position = UDim2.new(0, 160, 0, 70)
    content.BackgroundTransparency = 1
    content.ScrollBarThickness = 8
    content.Parent = mainFrame

    local contentList = Instance.new("UIListLayout")
    contentList.Padding = UDim.new(0, 15)
    contentList.SortOrder = Enum.SortOrder.LayoutOrder
    contentList.Parent = content

    -- Toggle UI on K
    UserInputService.InputBegan:Connect(function(i, gp)
        if gp then return end
        if i.KeyCode == window.ToggleKey then
            window.Visible = not window.Visible
            mainFrame.Visible = window.Visible
        end
    end)

    -- Draggable
    local dragging = false
    local dragInput, dragStart, startPos
    header.InputBegan:Connect(function(i)
        if i.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = i.Position
            startPos = mainFrame.Position
        end
    end)
    header.InputChanged:Connect(function(i)
        if i.UserInputType == Enum.UserInputType.MouseMovement then dragInput = i end
    end)
    UserInputService.InputChanged:Connect(function(i)
        if dragInput and dragging then
            local delta = i.Position - dragStart
            mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    header.InputEnded:Connect(function() dragging = false end)

    -- Tab
    function window:AddTab(tabConfig)
        local tab = {}
        tab.Title = tabConfig.Title or "Tab"
        tab.Elements = {}

        local tabBtn = Instance.new("TextButton")
        tabBtn.Size = UDim2.new(1, -20, 0, 50)
        tabBtn.Position = UDim2.new(0, 10, 0, 0)
        tabBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 70)
        tabBtn.Text = tab.Title
        tabBtn.TextColor3 = Color3.new(1,1,1)
        tabBtn.Font = Enum.Font.GothamBold
        tabBtn.TextSize = 18
        tabBtn.Parent = tabContainer

        local tbC = Instance.new("UICorner")
        tbC.CornerRadius = UDim.new(0, 10)
        tbC.Parent = tabBtn

        tabBtn.MouseButton1Click:Connect(function()
            window.CurrentTab = tab
            content:ClearAllChildren()
            contentList.Parent = content
            for _, el in pairs(tab.Elements) do
                el.Instance.Parent = content
            end
            for _, t in pairs(window.Tabs) do
                if t ~= tab then
                    TweenService:Create(t.Btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 70)}):Play()
                end
            end
            TweenService:Create(tabBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(80, 120, 255)}):Play()
        end)

        tab.Btn = tabBtn
        table.insert(window.Tabs, tab)

        if #window.Tabs == 1 then tabBtn.MouseButton1Click:Fire() end

        function tab:AddButton(btnConfig)
            local btn = {}
            btn.Title = btnConfig.Title or "Button"
            btn.Callback = btnConfig.Callback or function() end

            local el = Instance.new("TextButton")
            el.Size = UDim2.new(1, -40, 0, 60)
            el.BackgroundColor3 = Color3.fromRGB(55, 55, 90)
            el.Text = btn.Title
            el.TextColor3 = Color3.new(1,1,1)
            el.Font = Enum.Font.GothamBold
            el.TextSize = 20
            el.Visible = false

            local ec = Instance.new("UICorner")
            ec.CornerRadius = UDim.new(0, 12)
            ec.Parent = el

            local eg = Instance.new("UIGradient")
            eg.Color = ColorSequence.new{
                ColorSequenceKeypoint.new(0, Color3.fromRGB(80, 80, 140)),
                ColorSequenceKeypoint.new(1, Color3.fromRGB(60, 60, 100))
            }
            eg.Parent = el

            el.MouseEnter:Connect(function()
                TweenService:Create(el, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(80, 80, 160)}):Play()
            end)
            el.MouseLeave:Connect(function()
                TweenService:Create(el, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(55, 55, 90)}):Play()
            end)

            el.MouseButton1Click:Connect(btn.Callback)

            btn.Instance = el
            table.insert(tab.Elements, btn)
            return btn
        end

        -- –î—Ä—É–≥–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã (toggle, slider, label, paragraph) ‚Äî –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ, —Å —Ç–µ–º–∏ –∂–µ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏

        return tab
    end

    return window
end

return CustomLib
